# ๐ท๏ธ ูพูู ูุฏุฑุช ฺฉุฑุงููุฑ - qr.mojavez.ir

ฺฉ ูพูู ูุจ ฺฉุงูู ุจุฑุง ูุฏุฑุชุ ูุธุงุฑุช ู ุฐุฎุฑู ฺฉุฑุงููโูุง ุณุงุช qr.mojavez.ir

## โจ ูฺฺฏโูุง

- ๐ฏ **ุงุฌุงุฏ ฺฉุฑุงูู ุฌุฏุฏ**: ูุฑู ุณุงุฏู ุจุฑุง ุงุฌุงุฏ ฺฉุฑุงูู ุจุง ุชูุธูุงุช ฺฉุงูู
- ๐ **ุขูุงุฑ ุฒูุฏู**: ููุงุด ุขูุงุฑ ฺฉู ฺฉุฑุงููโูุง ู ุฑฺฉูุฑุฏูุง
- ๐ **ูุธุงุฑุช ุฏุฑ ุฒูุงู ูุงูุน**: ูุดุงูุฏู ูพุดุฑูุช ฺฉุฑุงููโูุง ุจู ุตูุฑุช ุฒูุฏู
- ๐ **ูุดุงูุฏู ุฑฺฉูุฑุฏูุง**: ููุงุด ุชูุงู ุฑฺฉูุฑุฏูุง ฺฉุฑุงูู ุดุฏู
- ๐๏ธ **ูุฏุฑุช ฺฉุงูู**: ุดุฑูุนุ ูุบู ู ุญุฐู ฺฉุฑุงููโูุง
- ๐พ **ุฐุฎุฑู ุฎูุฏฺฉุงุฑ**: ุชูุงู ุฑฺฉูุฑุฏูุง ุฏุฑ ุฏุชุงุจุณ SQLite ุฐุฎุฑู ูโุดููุฏ
- ๐จ **ุฑุงุจุท ฺฉุงุฑุจุฑ ุฒุจุง**: ุทุฑุงุญ ูุฏุฑู ู responsive

## ๐ ูุตุจ ุณุฑุน

```bash
# 1. ูุตุจ ูุงุจุณุชฺฏโูุง
cd web_panel
pip install -r requirements.txt

# 2. ุฑุงูโุงูุฏุงุฒ
python run.py

# 3. ุจุงุฒ ฺฉุฑุฏู ุฏุฑ ูุฑูุฑฺฏุฑ
# http://localhost:8000
```

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
Mojavez/
โโโ crawler.py              # ฺฉุฑุงููุฑ ุงุตู
โโโ date_utils.py           # ุงุจุฒุงุฑูุง ุชุงุฑุฎ
โโโ web_panel/              # ูพูู ูุจ
โ   โโโ main.py            # FastAPI application
โ   โโโ database.py        # ูุฏูโูุง ุฏุชุงุจุณ
โ   โโโ models.py          # ูุฏูโูุง API
โ   โโโ crawler_service.py # ุณุฑูุณ ุงุฌุฑุง ฺฉุฑุงููโูุง
โ   โโโ run.py             # ุงุณฺฉุฑูพุช ุฑุงูโุงูุฏุงุฒ
โ   โโโ requirements.txt   # ูุงุจุณุชฺฏโูุง
โ   โโโ templates/         # HTML templates
โ   โ   โโโ index.html
โ   โโโ static/            # ูุงูโูุง ุงุณุชุงุชฺฉ
โ       โโโ style.css
โ       โโโ script.js
โโโ README_WEB_PANEL.md    # ุงู ูุงู
```

## ๐ฏ ุงุณุชูุงุฏู

### ุงุฌุงุฏ ฺฉุฑุงูู ุฌุฏุฏ

1. ุจุงุฒ ฺฉุฑุฏู ูพูู ุฏุฑ ูุฑูุฑฺฏุฑ
2. ูพุฑ ฺฉุฑุฏู ูุฑู:
   - **ูุงู ฺฉุฑุงูู**: ูุซุงู: "ฺฉุฑุงูู ุชูุฑุงู - ุจููู 1404"
   - **ุชุงุฑุฎ ุดุฑูุน**: `2026/1/21`
   - **ุชุงุฑุฎ ูพุงุงู**: `2026/2/2`
   - **ุดูุงุณู ุงุณุชุงู**: `33` (ุชูุฑุงู)
   - **ุดูุงุณู ุดูุฑ**: `3310` (ุชูุฑุงู)
3. ฺฉูฺฉ ุฑู "ุงุฌุงุฏ ู ุดุฑูุน ฺฉุฑุงูู"

### ูุดุงูุฏู ูพุดุฑูุช

- ฺฉุฑุงููโูุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ูุณุช ููุงุด ุฏุงุฏู ูโุดููุฏ
- ูพุดุฑูุช ุจู ุตูุฑุช ุฏุฑุตุฏ ู ุตูุญู ููุงุด ุฏุงุฏู ูโุดูุฏ
- ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ูุฑ 5 ุซุงูู

### ูุดุงูุฏู ุฑฺฉูุฑุฏูุง

- ฺฉูฺฉ ุฑู ุฏฺฉูู "๐ ุฑฺฉูุฑุฏูุง" ุฏุฑ ูุฑ ฺฉุฑุงูู
- ููุงุด ูุณุช ฺฉุงูู ุฑฺฉูุฑุฏูุง ฺฉุฑุงูู ุดุฏู

## ๐ง API Endpoints

### GET /api/jobs
ุฏุฑุงูุช ูุณุช ุชูุงู ฺฉุฑุงููโูุง

### POST /api/jobs
ุงุฌุงุฏ ฺฉุฑุงูู ุฌุฏุฏ
```json
{
  "name": "ฺฉุฑุงูู ุชูุฑุงู",
  "start_date": "2026/1/21",
  "end_date": "2026/2/2",
  "province_id": 33,
  "township_id": 3310
}
```

### GET /api/jobs/{job_id}
ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉ ฺฉุฑุงูู

### POST /api/jobs/{job_id}/start
ุดุฑูุน ฺฉ ฺฉุฑุงูู

### POST /api/jobs/{job_id}/cancel
ูุบู ฺฉ ฺฉุฑุงูู

### DELETE /api/jobs/{job_id}
ุญุฐู ฺฉ ฺฉุฑุงูู ู ุชูุงู ุฑฺฉูุฑุฏูุงุด

### GET /api/jobs/{job_id}/records
ุฏุฑุงูุช ุฑฺฉูุฑุฏูุง ฺฉ ฺฉุฑุงูู

### GET /api/stats
ุฏุฑุงูุช ุขูุงุฑ ฺฉู

## ๐พ ุฏุชุงุจุณ

ุฏุชุงุจุณ SQLite ุฏุฑ ูุงู `crawler_panel.db` ุฐุฎุฑู ูโุดูุฏ.

### ุฌุฏุงูู:

- **crawl_jobs**: ุงุทูุงุนุงุช ฺฉุฑุงููโูุง
  - id, name, start_date, end_date
  - province_id, township_id
  - status, total_records, fetched_records
  - progress_percentage, current_page, total_pages
  
- **crawl_records**: ุฑฺฉูุฑุฏูุง ฺฉุฑุงูู ุดุฏู
  - crawl_job_id
  - request_number, applicant_name
  - license_title, organization_title
  - province_title, township_title
  - status_id, status_title
  - raw_data (JSON ฺฉุงูู)

## ๐จ ูฺฺฏโูุง UI

- ุทุฑุงุญ ูุฏุฑู ู responsive
- ุฑูฺฏโุจูุฏ ุจุฑ ุงุณุงุณ ูุถุนุช ฺฉุฑุงููโูุง
- Progress bar ุจุฑุง ฺฉุฑุงููโูุง ุฏุฑ ุญุงู ุงุฌุฑุง
- Modal ุจุฑุง ููุงุด ุฑฺฉูุฑุฏูุง
- ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ

## โ๏ธ ุชูุธูุงุช

### ุชุบุฑ ูพูุฑุช

ุฏุฑ `run.py`:
```python
uvicorn.run("main:app", port=8080)
```

### ุชุบุฑ ุฏุชุงุจุณ

ุฏุฑ `database.py`:
```python
DATABASE_URL = "sqlite:///./custom.db"
```

## ๐ ุนุจโุงุจ

### ุฎุทุง Import
ูุทูุฆู ุดูุฏ ฺฉู `crawler.py` ู `date_utils.py` ุฏุฑ ูพูุดู ุงุตู ูุณุชูุฏ.

### ุฎุทุง ุฏุชุงุจุณ
```bash
rm crawler_panel.db
python -c "from database import init_db; init_db()"
```

## ๐ ูฺฉุงุช

- ฺฉุฑุงููโูุง ุฏุฑ thread ูุง ุฌุฏุงฺฏุงูู ุงุฌุฑุง ูโุดููุฏ
- ูโุชูุงูุฏ ฺูุฏู ฺฉุฑุงูู ุฑุง ููุฒูุงู ุงุฌุฑุง ฺฉูุฏ
- ุชูุงู ุฑฺฉูุฑุฏูุง ุฏุฑ ุฏุชุงุจุณ ุฐุฎุฑู ูโุดููุฏ
- ูพุดุฑูุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ

## ๐ ุขูุงุฏู ุงุณุชูุงุฏู!

ูพูู ุดูุง ุขูุงุฏู ุงุณุช. ููุท ฺฉุงู ุงุณุช ุณุฑูุฑ ุฑุง ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ ู ุดุฑูุน ุจู ุงุณุชูุงุฏู ฺฉูุฏ!
